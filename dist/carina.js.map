{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap ca884c53c5512dbcc896","webpack:///./index.ts","webpack:///./lib/carina.ts","webpack:///./lib/socket.ts","webpack:///../~/events/events.js","webpack:///./lib/errors.ts"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;;ACtCA,8BAAc,CAAc,CAAC;AAC7B,8BAAc,CAAc,CAAC;AAC7B,8BAAc,CAAc,CAAC;;;;;;;;ACF7B,oCAAoC,CAAU,CAAC;AAE/C;KAAA;SAgCW,WAAM,GAAG,IAAI,4BAAmB,EAAE,CAAC;SAElC,YAAO,GAA4B,EAAE,CAAC;KAqDlD,CAAC;KA9EG,sBAAkB,mBAAS;cAI3B;aACI,MAAM,CAAC,4BAAmB,CAAC,SAAS,CAAC;SACzC,CAAC;SAdD;;;;;;;YAOG;cACH,UAA4B,EAAO;aAC/B,4BAAmB,CAAC,SAAS,GAAG,EAAE,CAAC;SACvC,CAAC;;;QAAA;KAaD,sBAAkB,iBAAO;cAIzB;aACI,MAAM,CAAC,4BAAmB,CAAC,OAAO,CAAC;SACvC,CAAC;SAbD;;;;;;YAMG;cACH,UAA0B,OAAY;aAClC,4BAAmB,CAAC,OAAO,GAAG,OAAO,CAAC;SAC1C,CAAC;;;QAAA;KAUD;;;QAGG;KAEH;;;;;;QAMG;KACI,0BAAS,GAAhB,UAAiB,IAAY,EAAE,EAAkC;SAAjE,iBAeC;SAdG,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,YAAY,EAAE,cAAI;aAC7B,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,KAAK,IAAI,CAAC,CAAC,CAAC;iBACxB,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;aACrB,CAAC;SACL,CAAC,CAAC,CAAC;SAEH,MAAM,CAAC,IAAI;cACV,OAAO,CAAC,kBAAgB,IAAM,EAAE;aAC7B,MAAM,CAAC,KAAI,CAAC,MAAM,CAAC,OAAO,CAAC,eAAe,EAAE,EAAE,MAAM,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;SACpE,CAAC,CAAC;cACD,KAAK,CAAC,aAAG;aACN,KAAI,CAAC,WAAW,CAAC,kBAAgB,IAAM,CAAC,CAAC;aACzC,MAAM,GAAG,CAAC;SACd,CAAC,CAAC,CAAC;KACP,CAAC;KAED;;;;;QAKG;KACI,4BAAW,GAAlB,UAAmB,IAAY;SAC3B,IAAI,CAAC,WAAW,CAAC,kBAAgB,IAAM,CAAC,CAAC;SACzC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,iBAAiB,EAAE,EAAE,MAAM,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;KACtE,CAAC;KAEO,wBAAO,GAAf,UAAmB,UAAkB,EAAE,EAAqB;SACxD,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;aAC3B,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;SACpC,CAAC;SAED,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,GAAG,EAAE,EAAE,CAAC;KAC3C,CAAC;KAEO,4BAAW,GAAnB,UAAoB,UAAkB;SAClC,OAAO,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;KACpC,CAAC;KACL,aAAC;AAAD,EAAC;AAvFY,eAAM,SAuFlB;;;;;;;;;;;;;ACzFD,oCAA6B,CAAQ,CAAC;AACtC,oCAAoE,CAAU,CAAC;AAE/E;KAAyC,uCAAY;KAajD;SAbJ,iBAkHC;SApGO,iBAAO,CAAC;SAPL,UAAK,GAAG,KAAK,CAAC;SAGb,cAAS,GAAW,CAAC,CAAC;SACtB,UAAK,GAAU,EAAE,CAAC;SAKtB,IAAI,CAAC,MAAM,GAAG,IAAI,mBAAmB,CAAC,SAAS,CAAC,mBAAmB,CAAC,iBAAiB,CAAC,CAAC;SAEvF,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,CAAC;SAC9B,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,CAAC;SAC/B,IAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC,CAAC;SACjC,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,CAAC;SAE/B,IAAI,CAAC,EAAE,CAAC,SAAS,EAAE,aAAG,IAAI,YAAI,CAAC,cAAc,CAAC,GAAG,CAAC,EAAxB,CAAwB,CAAC,CAAC;SACpD,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE;aACrB,KAAI,CAAC,KAAK,GAAG,IAAI,CAAC;aAClB,KAAI,CAAC,KAAK,CAAC,OAAO,CAAC,cAAI,IAAI,YAAI,CAAC,IAAI,CAAC,IAAI,CAAC,EAAf,CAAe,CAAC,CAAC;aAC5C,KAAI,CAAC,KAAK,GAAG,EAAE,CAAC;SACpB,CAAC,CAAC,CAAC;KACP,CAAC;KAED;;QAEG;KACI,qCAAO,GAAd,UAAe,MAA2B,EAAE,MAA2B,EAAE,EAA0B;SAAnG,iBA2BC;SA3B2C,sBAA2B,GAA3B,WAA2B;SAAE,kBAA0B,GAA1B,KAAa,IAAI,CAAC,MAAM,EAAE;SAC/F,IAAI,CAAC,QAAQ,CAAC;aACV,IAAI,EAAE,QAAQ;aACd,cAAM,EAAE,cAAM,EAAE,MAAE;UACrB,CAAC,CAAC;SAEH,MAAM,CAAC,IAAI,mBAAmB,CAAC,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM;aACnD,IAAI,aAAa,CAAC;aAClB,IAAI,OAAO,GAAG,UAAU,CAAC;iBACrB,KAAI,CAAC,cAAc,CAAC,WAAS,EAAI,EAAE,aAAa,CAAC,CAAC;iBAClD,MAAM,CACF,IAAI,qBAAY,CACZ,qCAAmC,MAAM,UAAK,IAAI,CAAC,SAAS,CAAC,MAAM,CAAG,CACzE,CACJ,CAAC;aACN,CAAC,EAAE,mBAAmB,CAAC,aAAa,CAAC,CAAC;aAEtC,KAAI,CAAC,IAAI,CAAC,WAAS,EAAI,EAAE,aAAa,GAAG,UAAC,GAAG,EAAE,GAAG;iBAC9C,YAAY,CAAC,OAAO,CAAC,CAAC;iBAEtB,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;qBACN,MAAM,CAAC,GAAG,CAAC,CAAC;iBAChB,CAAC;iBAAC,IAAI,CAAC,CAAC;qBACJ,OAAO,CAAC,GAAG,CAAC,CAAC;iBACjB,CAAC;aACL,CAAC,CAAC,CAAC;SACP,CAAC,CAAC,CAAC;KACP,CAAC;KAEM,sCAAQ,GAAf,UAAgB,MAAsB;SAClC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC;KACtC,CAAC;KAEM,kCAAI,GAAX,UAAY,IAAS;SACjB,uDAAuD;SACvD,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;aACd,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;aACtB,MAAM,CAAC;SACX,CAAC;SAED,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;SACxB,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;KAC3B,CAAC;KAEO,oCAAM,GAAd;SACI,MAAM,CAAC,EAAE,IAAI,CAAC,SAAS,CAAC;KAC5B,CAAC;KAEO,4CAAc,GAAtB,UAAwB,aAAqB;SACzC,IAAI,OAAO,CAAC;SAEZ,IAAI,CAAC;aACD,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC;SACxC,CAAE;SAAA,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;aACX,MAAM,IAAI,0BAAiB,CAAC,qCAAqC,CAAC,CAAC;SACvE,CAAC;SAED,MAAM,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC;aACvB,KAAK,OAAO;iBACR,IAAI,CAAC,IAAI,CAAC,WAAS,OAAO,CAAC,KAAO,EAAE,OAAO,CAAC,IAAI,CAAC,CAAC;iBAClD,KAAK,CAAC;aACV,KAAK,OAAO;iBACR,IAAI,GAAG,GAAG,OAAO,CAAC,KAAK,GAAG,2BAAkB,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC;iBACxE,IAAI,CAAC,IAAI,CAAC,WAAS,OAAO,CAAC,EAAI,EAAE,GAAG,EAAE,OAAO,CAAC,MAAM,CAAC,CAAC;iBACtD,KAAK,CAAC;SACV,CAAC;KACL,CAAC;KAEO,8CAAgB,GAAxB,UAAyB,IAAY;SAArC,iBAWC;SAVG,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,IAAI,EAAE,aAAG;aAClC,MAAM,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC;iBACnB,KAAK,SAAS;qBACV,KAAI,CAAC,IAAI,CAAC,IAAI,EAAG,GAAoB,CAAC,IAAI,CAAC,CAAC;qBAC5C,KAAK,CAAC;iBACV;qBACI,KAAI,CAAC,IAAI,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;qBACrB,KAAK,CAAC;aACV,CAAC;SACL,CAAC,CAAC;KACN,CAAC;KAhHa,6BAAS,GAAqB,OAAO,SAAS,KAAK,WAAW,GAAG,IAAI,GAAG,SAAS,CAAC;KAClF,2BAAO,GAAmB,OAAO,OAAO,KAAK,WAAW,GAAG,IAAI,GAAG,OAAO,CAAC;KAE1E,qCAAiB,GAAG,8BAA8B,CAAC;KACnD,iCAAa,GAAG,KAAK,CAAC,CAAC,aAAa;KA6GtD,0BAAC;AAAD,EAAC,CAlHwC,qBAAY,GAkHpD;AAlHY,4BAAmB,sBAkH/B;;;;;;;ACrHD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,gBAAe,SAAS;AACxB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AA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","file":"carina.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"carina\"] = factory();\n\telse\n\t\troot[\"carina\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap ca884c53c5512dbcc896\n **/","export * from './lib/carina';\nexport * from './lib/errors';\nexport * from './lib/socket';\n\n\n/** WEBPACK FOOTER **\n ** ./index.ts\n **/","import { ConstellationSocket } from './socket';\n\nexport class Carina {\n    /**\n     * Set the websocket implementation.\n     * You will likely not need to set this in a browser environment.\n     * You will not need to set this if WebSocket is globally available.\n     * \n     * @example \n     * Carina.WebSocket = require('ws');\n     */\n    public static set WebSocket(ws: any) {\n        ConstellationSocket.WebSocket = ws;\n    }\n\n    public static get WebSocket() {\n        return ConstellationSocket.WebSocket;\n    }\n\n    /**\n     * Set the Promise implementation.\n     * You will not need to set this if Promise is globally available.\n     * \n     * @example \n     * Carina.Promise = require('bluebird');\n     */\n    public static set Promise(promise: any) {\n        ConstellationSocket.Promise = promise;\n    }\n\n    public static get Promise() {\n        return ConstellationSocket.Promise;\n    }\n\n    public socket = new ConstellationSocket();\n\n    private waiting: StringMap<Promise<any>> = {};\n\n    /**\n     * @callback onSubscriptionCb\n     * @param {Object} data - The payload for the update.\n     */\n\n    /**\n     * Subscribe to a live event\n     * \n     * @param {string} slug\n     * @param {onSubscriptionCb} cb - Called each time we receive an event for this slug.\n     * @returns {Promise.<>} Resolves once subscribed. Any errors will reject.\n     */\n    public subscribe(slug: string, cb: (data: StringMap<any>) => void): Promise<any> {\n        this.socket.on(`event:live`, data => {\n            if (data.channel === slug) {\n                cb(data.payload);\n            }\n        });\n\n        return this\n        .waitFor(`subscription:${slug}`, () => {\n            return this.socket.execute('livesubscribe', { events: [slug] });\n        })\n        .catch(err => {\n            this.stopWaiting(`subscription:${slug}`);\n            throw err;\n        });\n    }\n\n    /**\n     * Unsubscribe from a live event.\n     * \n     * @param {string} slug\n     * @returns {Promise.<>} Resolves once unsubscribed. Any errors will reject.\n     */\n    public unsubscribe(slug: string) {\n        this.stopWaiting(`subscription:${slug}`);\n        return this.socket.execute('liveunsubscribe', { events: [slug] });\n    }\n\n    private waitFor<T>(identifier: string, cb?: () => Promise<T>): Promise<T> {\n        if (this.waiting[identifier]) {\n            return this.waiting[identifier];\n        }\n\n        return this.waiting[identifier] = cb();\n    }\n\n    private stopWaiting(identifier: string) {\n        delete this.waiting[identifier];\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/carina.ts\n **/","import { EventEmitter } from 'events';\nimport { TimeoutError, MessageParseError, ConstellationError } from './errors';\n\nexport class ConstellationSocket extends EventEmitter {\n    public static WebSocket: typeof WebSocket = typeof WebSocket === 'undefined' ? null : WebSocket;\n    public static Promise: typeof Promise = typeof Promise === 'undefined' ? null : Promise;\n\n    public static CONSTELLATION_URL = 'wss://constellation.beam.pro';\n    public static REPLY_TIMEOUT = 10000; // 10 seconds\n\n    public ready = false;\n\n    private socket: WebSocket;\n    private messageId: number = 0;\n    private queue: any[] = [];\n\n    constructor() {\n        super();\n\n        this.socket = new ConstellationSocket.WebSocket(ConstellationSocket.CONSTELLATION_URL);\n\n        this.rebroadcastEvent('open');\n        this.rebroadcastEvent('close');\n        this.rebroadcastEvent('message');\n        this.rebroadcastEvent('error');\n\n        this.on('message', res => this.extractMessage(res));\n        this.once('event:hello', () => {\n            this.ready = true;\n            this.queue.forEach(data => this.send(data));\n            this.queue = [];\n        });\n    }\n\n    /**\n     * Send a method to the server.\n     */\n    public execute(method: ConstellationMethod, params: StringMap<any> = {}, id: number = this.nextId()) {\n        this.sendJson({\n            type: 'method',\n            method, params, id\n        });\n\n        return new ConstellationSocket.Promise((resolve, reject) => {\n            let replyListener;\n            let timeout = setTimeout(() => {\n                this.removeListener(`reply:${id}`, replyListener);\n                reject(\n                    new TimeoutError(\n                        `Timeout waiting for response to ${method}: ${JSON.stringify(params)}`\n                    )\n                );\n            }, ConstellationSocket.REPLY_TIMEOUT);\n\n            this.once(`reply:${id}`, replyListener = (err, res) => {\n                clearTimeout(timeout);\n\n                if (err) {\n                    reject(err);\n                } else {\n                    resolve(res);\n                }\n            });\n        });\n    }\n\n    public sendJson(object: StringMap<any>) {\n        this.send(JSON.stringify(object));\n    }\n\n    public send(data: any) {\n        // If the socket has not said hello, queue the request.\n        if (!this.ready) {\n            this.queue.push(data);\n            return;\n        }\n\n        this.emit('send', data);\n        this.socket.send(data);\n    }\n\n    private nextId(): number {\n        return ++this.messageId;\n    }\n\n    private extractMessage (messageString: string) {\n        var message;\n\n        try {\n            message = JSON.parse(messageString);\n        } catch (err) {\n            throw new MessageParseError('Message returned was not valid JSON');\n        }\n\n        switch (message.type) {\n        case 'event':\n            this.emit(`event:${message.event}`, message.data);\n            break;\n        case 'reply':\n            let err = message.error ? ConstellationError.from(message.error) : null;\n            this.emit(`reply:${message.id}`, err, message.result);\n            break;\n        }\n    }\n\n    private rebroadcastEvent(name: string) {\n        this.socket.addEventListener(name, evt => {\n            switch (evt.type) {\n            case 'message':\n                this.emit(name, (evt as MessageEvent).data);\n                break;\n            default:\n                this.emit(name, evt);\n                break;\n            }\n        })\n    }\n}\n\nexport type ConstellationMethod = 'livesubscribe' | 'liveunsubscribe';\n\n\n/** WEBPACK FOOTER **\n ** ./lib/socket.ts\n **/","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../~/events/events.js\n ** module id = 3\n ** module chunks = 0\n **/","export class BaseError extends Error {\n    constructor(public message) {\n        super(message);\n    }\n}\n\nexport class TimeoutError extends BaseError {\n}\n\nexport class MessageParseError extends BaseError {\n}\n\nexport module ConstellationError {\n    export class Base extends BaseError {\n        constructor(public code: number, message: string) {\n            super(message);\n        }\n    }\n\n    const errors = {};\n\n    export function from({ code, message }: { code: number, message: string }) {\n        if (errors[code]) {\n            return new errors[code](message);\n        }\n\n        return new Base(code, message);\n    }\n\n    export class InvalidPayload extends Base {\n        constructor(message: string) {\n            super(4000, message);\n        }\n    }\n    errors[4000] = InvalidPayload;\n\n    export class PayloadDecompression extends Base {\n        constructor(message: string) {\n            super(4001, message);\n        }\n    }\n    errors[4001] = PayloadDecompression;\n\n    export class UnknownPacketType extends Base {\n        constructor(message: string) {\n            super(4002, message);\n        }\n    }\n    errors[4002] = UnknownPacketType;\n\n    export class UnknownMethodName extends Base {\n        constructor(message: string) {\n            super(4003, message);\n        }\n    }\n    errors[4003] = UnknownMethodName;\n\n    export class InvalidMethodArguments extends Base {\n        constructor(message: string) {\n            super(4004, message);\n        }\n    }\n    errors[4004] = InvalidMethodArguments;\n\n    export class SessionExpired extends Base {\n        constructor(message: string) {\n            super(4005, message);\n        }\n    }\n    errors[4005] = SessionExpired;\n\n    export class LiveUnknownEvent extends Base {\n        constructor(message: string) {\n            super(4100, message);\n        }\n    }\n    errors[4100] = LiveUnknownEvent;\n\n    export class LiveAccessDenied extends Base {\n        constructor(message: string) {\n            super(4101, message);\n        }\n    }\n    errors[4101] = LiveAccessDenied;\n\n    export class LiveAlreadySubscribed extends Base {\n        constructor(message: string) {\n            super(4102, message);\n        }\n    }\n    errors[4102] = LiveAlreadySubscribed;\n\n    export class LiveNotSubscribed extends Base {\n        constructor(message: string) {\n            super(4103, message);\n        }\n    }\n    errors[4103] = LiveNotSubscribed;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/errors.ts\n **/"],"sourceRoot":""}